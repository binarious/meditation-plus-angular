<md-card>
  <md-card-title>Reset Password</md-card-title>

  <form (submit)="sendMail($event)" *ngIf="!userId || !token">
    <p>
      <md-input-container>
        <input
          mdInput
          [(ngModel)]="email"
          placeholder="email"
          type="email"
          name="email"
          required
        >
      </md-input-container>
    </p>

    <p *ngIf="message">{{ message }}</p>
    <p *ngIf="error" class="error">{{ error }}</p>

    <p>
      <button
        md-raised-button
        color="primary"
        type="submit"
        [disabled]="loading || !email"
      >
        <md-spinner
          *ngIf="loading"
          class="in-button-spinner">
        </md-spinner>
        Reset Password
      </button>
    </p>
  </form>

  <form (submit)="resetPassword($event)" *ngIf="userId && token">
    <p>
      <md-input-container>
        <input
          mdInput
          [(ngModel)]="password"
          placeholder="Password (min 8)"
          type="password"
          minlength="8"
          name="password"
          required>
      </md-input-container>
    </p>

    <p>
      <md-input-container>
        <input
          mdInput
          [(ngModel)]="password2"
          placeholder="Repeat Password"
          type="password"
          minlength="8"
          name="password2"
          required>
      </md-input-container>
    </p>

    <p *ngIf="message">{{ message }}</p>
    <p *ngIf="error">{{ error }}</p>

    <p>
      <button
        md-raised-button
        color="primary"
        type="submit"
        [disabled]="loading || !password || password !== password2"
      >
        <md-spinner
          *ngIf="loading"
          class="in-button-spinner">
        </md-spinner>
        Change Password
      </button>
    </p>
  </form>
</md-card>
